'\" t
.\"     Title: globus-usage-collector
.\"    Author: [FIXME: author] [see http://docbook.sf.net/el/author]
.\" Generator: DocBook XSL Stylesheets v1.75.1 <http://docbook.sf.net/>
.\"      Date: 09/24/2009
.\"    Manual: Globus Usage Statistics Tools
.\"    Source: [FIXME: source]
.\"  Language: English
.\"
.TH "GLOBUS\-USAGE\-COLLE" "8" "09/24/2009" "[FIXME: source]" "Globus Usage Statistics Tools"
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
globus-usage-collector \- Record usage statistics packets
.SH "SYNOPSIS"
.HP \w'\fBglobus\-usage\-collector\fR\ 'u
\fBglobus\-usage\-collector\fR [\-h] [\-p\ \fIPORT\fR] [\-b] [\-f\ \fIFILE\fR]
.SH "DESCRIPTION"
.PP
The
\fBglobus\-usage\-collector\fR
command is a servivce which accepts usage packets on a UDP port and writes them to a file for later processing\&.
.PP
The full set of command\-line options to
\fBglobus\-usage\-collector\fR
consists of:
.TS
allbox tab(:);
l l
l l
l l
l l
l l.
T{
\-h
T}:T{
Display a help message and exit
T}
T{
\-p \fIPORT\fR
T}:T{
Listen on UDP port \fIPORT\fR
                    instead of the default port 4810
T}
T{
\-d \fIDIRECTORY\fR
T}:T{
Write data to \fIDIRECTORY\fR
                    instead of the configured path\&.
T}
T{
\-b
T}:T{
Run the \fBglobus\-usage\-collector\fR
                    process in the background
T}
T{
\-f \fIFILE\fR
T}:T{
Write the process ID of the backgrounded
                \fBglobus\-usage\-collector\fR process to
                \fIFILE\fR\&.
T}
.TE
.sp 1
.SH "USAGE PACKET FILES"
.PP
The files are written in a subdirectory of the current directory with its name derived from the current time in UTC\&. The form of this directory name is
\fIYYYYMMDD\fR, (e\&.g\&. the date July 20, 2009 would be
20090720)\&. Within that directory, files are generated with name based on the hour (again in UTC)\&. The form of the filename is
\fIHH\&.gup\fR
\&.when the packet was processed\&. That is, a packet processed at 3:20 a\&.m\&. on that same day would be stored in the file
20090720/03\&.gup\&.
.PP
Each usage packet file consists of simple records containing the binary UDP usage packet data\&. Each packet record consists of 4 fields:
.TS
allbox tab(:);
l l
l l
l l
l l.
T{
Address Length (2 bytes)
T}:T{
Big\-endian length of the Address
T}
T{
Address
T}:T{
Big\-endian packed binary address
T}
T{
Packet Length (2 bytes)
T}:T{
Big\-endian length of the packet
T}
T{
Packet
T}:T{
Binary packet data
T}
.TE
.sp 1

