## Process this file with automake to produce Makefile.in

include $(top_srcdir)/globus_automake_pre
include $(top_srcdir)/globus_automake_pre_top

SUBDIRS= \
	pkgdata \
	doxygen \
	web

LibSources= \
	gnu_getopt.c \
	gnu_getopt.h \
	gnu_getopt_long.c \
	gsi_proxy.c \
	gsi_proxy.h \
	gsi_socket.c \
	gsi_socket.h \
	myproxy.c \
	myproxy.h \
	myproxy_authorization.c \
	myproxy_authorization.h \
	myproxy_delegation.c \
	myproxy_delegation.h \
	myproxy_read_pass.c \
	myproxy_read_pass.h \
	ssl_utils.c \
	ssl_utils.h \
	sslutil.h \
	string_funcs.c \
	string_funcs.h \
	verror.c \
	verror.h \
	version.h

ServerSources= \
	myproxy_creds.c \
	myproxy_creds.h \
	myproxy_log.c \
	myproxy_log.h \
	myproxy_server.c \
	myproxy_server.h \
	myproxy_server_config.c \
	vparse.c \
	vparse.h

INCLUDES += $(GPT_INCLUDES)

Scripts= \
	myproxy.cron

sbin_SCRIPTS = $(Scripts)

flavorinclude_HEADERS= \
	myproxy.h \
	myproxy_creds.h

lib_LTLIBRARIES = libmyproxy_$(GLOBUS_FLAVOR_NAME).la

libmyproxy___GLOBUS_FLAVOR_NAME__la_SOURCES = $(LibSources)

libmyproxy___GLOBUS_FLAVOR_NAME__la_LDFLAGS = $(GPT_LDFLAGS)

libmyproxy___GLOBUS_FLAVOR_NAME__la_LIBADD = $(GPT_LIB_LINKS)

bin_PROGRAMS= \
	myproxy-init \
	myproxy-destroy \
	myproxy-get-delegation

sbin_PROGRAMS= myproxy-server

myproxy_init_SOURCES = 	myproxy_init.c

myproxy_init_LDFLAGS = $(GPT_LDFLAGS)

myproxy_init_LDADD = $(GPT_PGM_LINKS) ./libmyproxy_$(GLOBUS_FLAVOR_NAME).la

myproxy_destroy_SOURCES = myproxy_destroy.c

myproxy_destroy_LDFLAGS = $(GPT_LDFLAGS)

myproxy_destroy_LDADD = $(GPT_PGM_LINKS) ./libmyproxy_$(GLOBUS_FLAVOR_NAME).la

myproxy_server_SOURCES = $(ServerSources)
myproxy_server_LDFLAGS = $(GPT_LDFLAGS)

myproxy_server_LDADD = $(GPT_PGM_LINKS) ./libmyproxy_$(GLOBUS_FLAVOR_NAME).la

myproxy_get_delegation_SOURCES = myproxy_get_delegation.c

myproxy_get_delegation_LDFLAGS = $(GPT_LDFLAGS)

myproxy_get_delegation_LDADD = $(GPT_PGM_LINKS) ./libmyproxy_$(GLOBUS_FLAVOR_NAME).la


noinst_PROGRAMS = gsi_socket_test

gsi_socket_test_SOURCES = gsi_socket_test.c gsi_socket.c

gsi_socket_test_LDFLAGS = $(GPT_LDFLAGS)

gsi_socket_test_LDADD = $(GPT_PGM_LINKS)  ./libmyproxy_$(GLOBUS_FLAVOR_NAME).la

sysconf_DATA = myproxy-server.config

pkgdata_DATA = README INSTALL LICENSE VERSION \
               etc.services.modifications etc.inetd.conf.modifications

EXTRA_DIST = $(Scripts) LICENSE VERSION myproxy-server.config \
               etc.services.modifications etc.inetd.conf.modifications

include $(top_srcdir)/globus_automake_post
include $(top_srcdir)/globus_automake_post_top

